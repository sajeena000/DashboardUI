import{_ as oe}from"./BUSItsXT.js";import{_ as le}from"./B9a6rt6W.js";import{_ as ae}from"./9kUDjqgu.js";import{r as i,C as ie,H as ne,c as d,a as e,l as N,k as $,b as m,t as n,n as o,F,m as M,y as O,p as L,q as u,v as b,s as S,T as q,o as r,x as z}from"./DSVZJnba.js";import{B as re}from"./Cjz4n6X0.js";import{P as de}from"./D9u2-5lG.js";import{T as ue}from"./CAblKD2E.js";import{X as R}from"./neRWB7_o.js";import{C as ce}from"./Bdw4Rh7Q.js";import"./CqshNR8s.js";import"./ME1vAZHe.js";import"./DlAUqK2U.js";import"./qQsMwbb5.js";import"./eTiOZxs9.js";const pe={class:"space-y-8"},me={class:"flex flex-col md:flex-row md:items-center justify-between gap-4"},xe={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},ge={class:"p-4 rounded-xl bg-slate-900/40 border border-white/5"},fe={class:"text-2xl font-display font-bold text-white"},ve={class:"p-4 rounded-xl bg-slate-900/40 border border-white/5"},be={class:"text-2xl font-display font-bold text-emerald-400"},we={class:"p-4 rounded-xl bg-slate-900/40 border border-white/5"},ye={class:"text-2xl font-display font-bold text-amber-400"},he={class:"p-4 rounded-xl bg-slate-900/40 border border-white/5"},Ce={class:"text-2xl font-display font-bold text-indigo-400"},ke={key:0,class:"text-center py-20"},_e={key:1,class:"text-center py-20 border border-dashed border-white/10 rounded-2xl"},Pe={key:2,class:"overflow-x-auto"},De={class:"w-full"},Te={class:"divide-y divide-white/5"},$e={class:"p-4"},Se={class:"text-white font-medium"},Ue={class:"text-slate-500 text-xs"},Ve={class:"p-4"},Ee={class:"flex items-center gap-2"},Ie=["src","alt"],Be={class:"text-slate-300"},Ne={class:"p-4"},je={class:"px-2 py-1 bg-white/5 text-slate-400 text-xs rounded-lg"},Ae={class:"p-4"},Fe={class:"p-4 text-white font-medium"},Me={class:"p-4"},Oe={class:"p-4"},Le={class:"flex justify-end gap-2"},qe=["onClick"],ze=["onClick"],Re={key:0,class:"fixed inset-0 z-[100] flex items-center justify-center px-4"},We={class:"relative w-full max-w-lg bg-slate-900 border border-white/10 rounded-2xl shadow-2xl p-6 overflow-hidden max-h-[90vh] overflow-y-auto"},Ge={class:"flex justify-between items-center mb-6"},He={class:"text-xl font-display font-bold text-white"},Xe={class:"space-y-1"},Je={class:"space-y-1"},Ke={class:"relative"},Qe=["value"],Ye={class:"grid grid-cols-2 gap-4"},Ze={class:"space-y-1"},et={class:"space-y-1"},tt={class:"grid grid-cols-2 gap-4"},st={class:"space-y-1"},ot={class:"space-y-1"},lt={class:"space-y-1"},at={class:"space-y-1"},it={class:"pt-4 flex gap-3"},nt=["disabled"],rt={key:0,class:"fixed inset-0 z-[110] flex items-center justify-center px-4"},dt={class:"relative w-full max-w-md bg-slate-900 border border-white/10 rounded-2xl shadow-2xl p-6"},ut={class:"flex justify-between items-center mb-6"},ct={class:"space-y-1"},pt={class:"space-y-1"},mt={class:"pt-4 flex gap-3"},xt=["disabled"],Ut={__name:"projects",setup(gt){const W={Basic:2999,Professional:9999,Enterprise:25e3,Custom:0},U=i([]),V=i([]),E=i(!0),g=i(!1),f=i(!1),w=i(!1),P=i(!1),D=i(!1),y=i(!1),h=i(null),C=i(null),c=i(""),p=i(""),x=i("success"),a=i({id:null,name:"",clientId:"",projectType:"Web",pricingPackage:"Basic",value:2999,status:"pending",description:"",startDate:new Date().toISOString().split("T")[0]}),v=i({name:"",email:""});ie(()=>{T(),G()});const G=async()=>{try{V.value=await $fetch("/api/clients")}catch(l){console.error("Failed to fetch clients:",l)}},k=i(1),I=i(0),j=i(10),_=i({totalValue:0,active:0,pending:0,completed:0}),T=async()=>{E.value=!0;try{const l=await $fetch("/api/projects",{params:{page:k.value,limit:j.value}});U.value=l.data,I.value=l.meta.total,l.meta.stats&&(_.value=l.meta.stats)}catch(l){console.error("Failed to fetch projects:",l)}finally{E.value=!1}};ne(k,()=>{T()});const H=()=>{const l=a.value.pricingPackage;l!=="Custom"&&(a.value.value=W[l])},B=(l=null)=>{l?(w.value=!0,a.value={id:l.id,name:l.name,clientId:l.clientId,projectType:l.projectType,pricingPackage:l.pricingPackage||"Basic",value:l.value||0,status:l.status,description:l.description||"",startDate:l.startDate?new Date(l.startDate).toISOString().split("T")[0]:new Date().toISOString().split("T")[0]}):(w.value=!1,a.value={id:null,name:"",clientId:"",projectType:"Web",pricingPackage:"Basic",value:2999,status:"pending",description:"",startDate:new Date().toISOString().split("T")[0]}),g.value=!0},X=async()=>{P.value=!0;try{w.value?(await $fetch(`/api/projects/${a.value.id}`,{method:"PUT",body:a.value}),c.value="Updated",p.value="Project updated successfully."):(await $fetch("/api/projects",{method:"POST",body:a.value}),c.value="Created",p.value="Project created successfully."),x.value="success",g.value=!1,T()}catch(l){c.value="Error",p.value="Failed to save project.",x.value="error",console.error(l)}finally{P.value=!1,C.value.show()}},J=async()=>{D.value=!0;try{const l=await $fetch("/api/clients",{method:"POST",body:v.value});V.value.unshift(l),a.value.clientId=l.id,v.value={name:"",email:""},f.value=!1,c.value="Client Created",p.value=`${l.name} has been added.`,x.value="success",C.value.show()}catch(l){c.value="Error",p.value="Failed to create client.",x.value="error",console.error(l),C.value.show()}finally{D.value=!1}},K=l=>{h.value=l,y.value=!0},Q=async()=>{if(h.value)try{await $fetch(`/api/projects/${h.value.id}`,{method:"DELETE"}),c.value="Deleted",p.value="Project deleted.",x.value="success",T()}catch{c.value="Error",p.value="Failed to delete project.",x.value="error"}finally{y.value=!1,h.value=null,C.value.show()}},A=l=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(l||0),Y=l=>l?new Date(l).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"Unknown";return(l,t)=>{const Z=oe,ee=le,te=ae;return r(),d("div",pe,[e("div",me,[t[21]||(t[21]=e("div",null,[e("h1",{class:"text-3xl font-display font-bold text-white mb-2"},"Projects"),e("p",{class:"text-slate-400"},"Track and manage client projects.")],-1)),e("button",{onClick:t[0]||(t[0]=s=>B()),class:"px-4 py-2 bg-indigo-600 hover:bg-indigo-500 text-white rounded-lg text-sm font-medium shadow-lg shadow-indigo-500/20 transition-all"}," + New Project ")]),e("div",xe,[e("div",ge,[t[22]||(t[22]=e("p",{class:"text-slate-500 text-xs uppercase tracking-wider"},"Total Value",-1)),e("p",fe,n(A(o(_).totalValue)),1)]),e("div",ve,[t[23]||(t[23]=e("p",{class:"text-slate-500 text-xs uppercase tracking-wider"},"Active",-1)),e("p",be,n(o(_).active),1)]),e("div",we,[t[24]||(t[24]=e("p",{class:"text-slate-500 text-xs uppercase tracking-wider"},"Pending",-1)),e("p",ye,n(o(_).pending),1)]),e("div",he,[t[25]||(t[25]=e("p",{class:"text-slate-500 text-xs uppercase tracking-wider"},"Completed",-1)),e("p",Ce,n(o(_).completed),1)])]),o(E)?(r(),d("div",ke,[...t[26]||(t[26]=[e("div",{class:"w-8 h-8 border-4 border-indigo-600 border-t-transparent rounded-full animate-spin mx-auto"},null,-1),e("p",{class:"text-slate-500 mt-4"},"Loading projects...",-1)])])):o(U).length===0?(r(),d("div",_e,[m(o(re),{class:"w-12 h-12 text-slate-500 mx-auto mb-4"}),t[27]||(t[27]=e("p",{class:"text-slate-400 mb-2"},"No projects yet",-1)),e("button",{onClick:t[1]||(t[1]=s=>B()),class:"text-indigo-400 hover:text-indigo-300 text-sm font-medium"}," Create your first project ")])):(r(),d("div",Pe,[e("table",De,[t[28]||(t[28]=e("thead",null,[e("tr",{class:"text-left text-xs uppercase tracking-wider text-slate-500"},[e("th",{class:"p-4"},"Project"),e("th",{class:"p-4"},"Client"),e("th",{class:"p-4"},"Type"),e("th",{class:"p-4"},"Package"),e("th",{class:"p-4"},"Value"),e("th",{class:"p-4"},"Status"),e("th",{class:"p-4 text-right"},"Actions")])],-1)),e("tbody",Te,[(r(!0),d(F,null,M(o(U),s=>(r(),d("tr",{key:s.id,class:"hover:bg-white/5 transition-colors"},[e("td",$e,[e("p",Se,n(s.name),1),e("p",Ue,n(Y(s.startDate||s.createdAt)),1)]),e("td",Ve,[e("div",Ee,[s.clientAvatar?(r(),d("img",{key:0,src:s.clientAvatar,class:"w-6 h-6 rounded-full bg-slate-700",alt:s.clientName},null,8,Ie)):$("",!0),e("span",Be,n(s.clientName||"Unknown"),1)])]),e("td",Ne,[e("span",je,n(s.projectType),1)]),e("td",Ae,[e("span",{class:z(["px-2 py-1 text-xs rounded-lg",{"bg-slate-500/20 text-slate-300":s.pricingPackage==="Basic","bg-blue-500/20 text-blue-400":s.pricingPackage==="Professional","bg-purple-500/20 text-purple-400":s.pricingPackage==="Enterprise","bg-amber-500/20 text-amber-400":s.pricingPackage==="Custom"}])},n(s.pricingPackage||"Basic"),3)]),e("td",Fe,n(A(s.value)),1),e("td",Me,[e("span",{class:z(["px-2 py-1 text-xs font-medium rounded-full capitalize",{"bg-emerald-500/20 text-emerald-400":s.status==="active","bg-amber-500/20 text-amber-400":s.status==="pending","bg-indigo-500/20 text-indigo-400":s.status==="completed","bg-rose-500/20 text-rose-400":s.status==="cancelled"}])},n(s.status),3)]),e("td",Oe,[e("div",Le,[e("button",{onClick:se=>B(s),class:"p-2 text-slate-400 hover:text-white hover:bg-white/10 rounded-lg transition-colors",title:"Edit"},[m(o(de),{class:"w-4 h-4"})],8,qe),e("button",{onClick:se=>K(s),class:"p-2 text-slate-400 hover:text-rose-500 hover:bg-rose-500/10 rounded-lg transition-colors",title:"Delete"},[m(o(ue),{class:"w-4 h-4"})],8,ze)])])]))),128))])])])),o(I)>0?(r(),N(Z,{key:3,"current-page":o(k),"onUpdate:currentPage":t[2]||(t[2]=s=>O(k)?k.value=s:null),total:o(I),"items-per-page":o(j)},null,8,["current-page","total","items-per-page"])):$("",!0),(r(),N(q,{to:"body"},[o(g)?(r(),d("div",Re,[e("div",{class:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:t[3]||(t[3]=s=>g.value=!1)}),e("div",We,[e("div",Ge,[e("h3",He,n(o(w)?"Edit Project":"Create Project"),1),e("button",{onClick:t[4]||(t[4]=s=>g.value=!1),class:"text-slate-400 hover:text-white"},[m(o(R),{class:"w-5 h-5"})])]),e("form",{class:"space-y-4",onSubmit:L(X,["prevent"])},[e("div",Xe,[t[29]||(t[29]=e("label",{class:"text-sm font-medium text-slate-300"},"Project Name",-1)),u(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>o(a).name=s),required:"",type:"text",class:"w-full bg-slate-950 border border-white/10 rounded-xl px-4 py-2.5 text-white text-sm focus:outline-none focus:border-indigo-500/50 focus:ring-1 focus:ring-indigo-500/50 transition-all"},null,512),[[b,o(a).name]])]),e("div",Je,[t[31]||(t[31]=e("label",{class:"text-sm font-medium text-slate-300"},"Client",-1)),e("div",Ke,[u(e("select",{"onUpdate:modelValue":t[6]||(t[6]=s=>o(a).clientId=s),required:"",class:"w-full bg-slate-950 border border-white/10 rounded-xl px-4 py-2.5 text-white text-sm focus:outline-none focus:border-indigo-500/50 focus:ring-1 focus:ring-indigo-500/50 transition-all appearance-none cursor-pointer"},[t[30]||(t[30]=e("option",{value:"",disabled:""},"Select a client...",-1)),(r(!0),d(F,null,M(o(V),s=>(r(),d("option",{key:s.id,value:s.id},n(s.name),9,Qe))),128))],512),[[S,o(a).clientId]]),m(o(ce),{class:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]),e("button",{type:"button",onClick:t[7]||(t[7]=s=>f.value=!0),class:"text-xs text-indigo-400 hover:text-indigo-300 mt-1"}," + Create new client ")]),e("div",Ye,[e("div",Ze,[t[33]||(t[33]=e("label",{class:"text-sm font-medium text-slate-300"},"Project Type",-1)),u(e("select",{"onUpdate:modelValue":t[8]||(t[8]=s=>o(a).projectType=s),class:"w-full bg-slate-950 border border-white/10 rounded-xl px-4 py-2.5 text-white text-sm focus:outline-none focus:border-indigo-500/50 focus:ring-1 focus:ring-indigo-500/50 transition-all"},[...t[32]||(t[32]=[e("option",null,"Web",-1),e("option",null,"Mobile",-1),e("option",null,"AI",-1),e("option",null,"DevOps",-1),e("option",null,"Consulting",-1),e("option",null,"Other",-1)])],512),[[S,o(a).projectType]])]),e("div",et,[t[35]||(t[35]=e("label",{class:"text-sm font-medium text-slate-300"},"Pricing Package",-1)),u(e("select",{"onUpdate:modelValue":t[9]||(t[9]=s=>o(a).pricingPackage=s),onChange:H,class:"w-full bg-slate-950 border border-white/10 rounded-xl px-4 py-2.5 text-white text-sm focus:outline-none focus:border-indigo-500/50 focus:ring-1 focus:ring-indigo-500/50 transition-all"},[...t[34]||(t[34]=[e("option",{value:"Basic"},"Basic ($2,999)",-1),e("option",{value:"Professional"},"Professional ($9,999)",-1),e("option",{value:"Enterprise"},"Enterprise ($15k-$50k)",-1),e("option",{value:"Custom"},"Custom",-1)])],544),[[S,o(a).pricingPackage]])])]),e("div",tt,[e("div",st,[t[36]||(t[36]=e("label",{class:"text-sm font-medium text-slate-300"},"Value ($)",-1)),u(e("input",{"onUpdate:modelValue":t[10]||(t[10]=s=>o(a).value=s),type:"number",min:"0",class:"w-full bg-slate-950 border border-white/10 rounded-xl px-4 py-2.5 text-white text-sm focus:outline-none focus:border-indigo-500/50 focus:ring-1 focus:ring-indigo-500/50 transition-all"},null,512),[[b,o(a).value,void 0,{number:!0}]])]),e("div",ot,[t[38]||(t[38]=e("label",{class:"text-sm font-medium text-slate-300"},"Status",-1)),u(e("select",{"onUpdate:modelValue":t[11]||(t[11]=s=>o(a).status=s),class:"w-full bg-slate-950 border border-white/10 rounded-xl px-4 py-2.5 text-white text-sm focus:outline-none focus:border-indigo-500/50 focus:ring-1 focus:ring-indigo-500/50 transition-all"},[...t[37]||(t[37]=[e("option",{value:"pending"},"Pending",-1),e("option",{value:"active"},"Active",-1),e("option",{value:"completed"},"Completed",-1),e("option",{value:"cancelled"},"Cancelled",-1)])],512),[[S,o(a).status]])])]),e("div",lt,[t[39]||(t[39]=e("label",{class:"text-sm font-medium text-slate-300"},"Start Date",-1)),u(e("input",{"onUpdate:modelValue":t[12]||(t[12]=s=>o(a).startDate=s),type:"date",class:"w-full bg-slate-950 border border-white/10 rounded-xl px-4 py-2.5 text-white text-sm focus:outline-none focus:border-indigo-500/50 focus:ring-1 focus:ring-indigo-500/50 transition-all"},null,512),[[b,o(a).startDate]])]),e("div",at,[t[40]||(t[40]=e("label",{class:"text-sm font-medium text-slate-300"},"Description",-1)),u(e("textarea",{"onUpdate:modelValue":t[13]||(t[13]=s=>o(a).description=s),rows:"3",placeholder:"Project details...",class:"w-full bg-slate-950 border border-white/10 rounded-xl px-4 py-2.5 text-white text-sm focus:outline-none focus:border-indigo-500/50 focus:ring-1 focus:ring-indigo-500/50 transition-all resize-none"},null,512),[[b,o(a).description]])]),e("div",it,[e("button",{type:"button",onClick:t[14]||(t[14]=s=>g.value=!1),class:"flex-1 px-4 py-2.5 rounded-xl bg-white/5 hover:bg-white/10 text-white text-sm font-medium border border-white/5 transition-colors"}," Cancel "),e("button",{type:"submit",disabled:o(P),class:"flex-1 px-4 py-2.5 rounded-xl bg-indigo-600 hover:bg-indigo-500 text-white text-sm font-medium shadow-lg shadow-indigo-500/20 transition-all disabled:opacity-70"},n(o(P)?"Saving...":o(w)?"Save Changes":"Create Project"),9,nt)])],32)])])):$("",!0)])),(r(),N(q,{to:"body"},[o(f)?(r(),d("div",rt,[e("div",{class:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:t[15]||(t[15]=s=>f.value=!1)}),e("div",dt,[e("div",ut,[t[41]||(t[41]=e("h3",{class:"text-lg font-display font-bold text-white"},"Create New Client",-1)),e("button",{onClick:t[16]||(t[16]=s=>f.value=!1),class:"text-slate-400 hover:text-white"},[m(o(R),{class:"w-5 h-5"})])]),e("form",{class:"space-y-4",onSubmit:L(J,["prevent"])},[e("div",ct,[t[42]||(t[42]=e("label",{class:"text-sm font-medium text-slate-300"},"Company Name",-1)),u(e("input",{"onUpdate:modelValue":t[17]||(t[17]=s=>o(v).name=s),required:"",type:"text",placeholder:"Acme Corporation",class:"w-full bg-slate-950 border border-white/10 rounded-xl px-4 py-2.5 text-white text-sm focus:outline-none focus:border-indigo-500/50 focus:ring-1 focus:ring-indigo-500/50 transition-all"},null,512),[[b,o(v).name]])]),e("div",pt,[t[43]||(t[43]=e("label",{class:"text-sm font-medium text-slate-300"},"Contact Email",-1)),u(e("input",{"onUpdate:modelValue":t[18]||(t[18]=s=>o(v).email=s),required:"",type:"email",placeholder:"contact@company.com",class:"w-full bg-slate-950 border border-white/10 rounded-xl px-4 py-2.5 text-white text-sm focus:outline-none focus:border-indigo-500/50 focus:ring-1 focus:ring-indigo-500/50 transition-all"},null,512),[[b,o(v).email]])]),e("div",mt,[e("button",{type:"button",onClick:t[19]||(t[19]=s=>f.value=!1),class:"flex-1 px-4 py-2.5 rounded-xl bg-white/5 hover:bg-white/10 text-white text-sm font-medium border border-white/5 transition-colors"}," Cancel "),e("button",{type:"submit",disabled:o(D),class:"flex-1 px-4 py-2.5 rounded-xl bg-emerald-600 hover:bg-emerald-500 text-white text-sm font-medium shadow-lg shadow-emerald-500/20 transition-all disabled:opacity-70"},n(o(D)?"Creating...":"Create Client"),9,xt)])],32)])])):$("",!0)])),m(ee,{modelValue:o(y),"onUpdate:modelValue":t[20]||(t[20]=s=>O(y)?y.value=s:null),title:"Delete Project",description:`Are you sure you want to delete '${o(h)?.name}'? This action cannot be undone.`,"confirm-text":"Delete",onConfirm:Q},null,8,["modelValue","description"]),m(te,{ref_key:"toastRef",ref:C,title:o(c),message:o(p),type:o(x)},null,8,["title","message","type"])])}}};export{Ut as default};
