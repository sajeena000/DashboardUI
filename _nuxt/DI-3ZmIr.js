import{_ as A}from"./BUSItsXT.js";import{_ as H}from"./B9a6rt6W.js";import{_ as O}from"./9kUDjqgu.js";import{r as a,C as X,H as G,c as r,a as e,l as M,k as D,b as u,n as o,F as J,m as K,y as V,t as d,p as Q,q as h,v as w,T as W,o as i,x as F}from"./DSVZJnba.js";import{_ as Y}from"./DlAUqK2U.js";import{C as Z}from"./Bl5w_zhA.js";import{P as ee}from"./D9u2-5lG.js";import{T as te}from"./CAblKD2E.js";import{M as se}from"./DNe78XNv.js";import{X as oe}from"./neRWB7_o.js";import"./CqshNR8s.js";import"./ME1vAZHe.js";import"./qQsMwbb5.js";import"./eTiOZxs9.js";const le={class:"space-y-8"},ne={class:"flex flex-col md:flex-row md:items-center justify-between gap-4"},ae={key:0,class:"text-center py-20"},ie={key:1,class:"text-center py-20 border border-dashed border-white/10 rounded-2xl"},re={key:2,class:"grid md:grid-cols-2 lg:grid-cols-3 gap-6"},de={class:"absolute top-4 right-4 flex gap-2 opacity-0 group-hover:opacity-100 transition-all"},ue=["onClick"],ce=["onClick"],pe={class:"text-white text-xs uppercase"},me={class:"text-white text-lg font-bold"},fe={class:"text-white font-medium text-lg mb-1"},ve={key:0,class:"flex items-center gap-2 text-slate-500 text-sm mb-3"},xe={class:"truncate"},ge={key:1,class:"text-slate-400 text-sm line-clamp-2"},be={class:"mt-4 pt-4 border-t border-white/5"},he={key:0,class:"fixed inset-0 z-[100] flex items-center justify-center px-4"},we={class:"relative w-full max-w-lg bg-slate-900 border border-white/10 rounded-2xl shadow-2xl p-6 overflow-hidden"},ye={class:"flex justify-between items-center mb-6"},_e={class:"text-xl font-display font-bold text-white"},De={class:"space-y-1"},ke={class:"grid grid-cols-2 gap-4"},Ce={class:"space-y-1"},Ee={class:"space-y-1"},Ue={class:"space-y-1"},$e={class:"space-y-1"},Te={class:"pt-4 flex gap-3"},Pe=["disabled"],Me={__name:"events",setup(Ve){const k=a([]),C=a(!0),c=a(!1),f=a(!1),y=a(!1),v=a(!1),x=a(null),E=a(null),p=a(""),m=a(""),g=a("success"),n=a({id:null,title:"",eventDate:"",location:"",imageUrl:"",description:""});X(()=>{_()});const b=a(1),U=a(0),P=a(9),_=async()=>{C.value=!0;try{const l=await $fetch("/api/events",{params:{page:b.value,limit:P.value}});k.value=l.data,U.value=l.meta.total}catch(l){console.error("Failed to fetch events:",l)}finally{C.value=!1}};G(b,()=>{_()});const $=(l=null)=>{l?(f.value=!0,n.value={id:l.id,title:l.title,eventDate:l.eventDate?l.eventDate.split("T")[0]:"",location:l.location||"",imageUrl:l.imageUrl||"",description:l.description||""}):(f.value=!1,n.value={id:null,title:"",eventDate:"",location:"",imageUrl:"",description:""}),c.value=!0},L=async()=>{y.value=!0;try{f.value?(await $fetch(`/api/events/${n.value.id}`,{method:"PUT",body:n.value}),p.value="Updated",m.value="Event updated successfully."):(await $fetch("/api/events",{method:"POST",body:n.value}),p.value="Created",m.value="Event created successfully."),g.value="success",c.value=!1,_()}catch(l){p.value="Error",m.value="Failed to save event.",g.value="error",console.error(l)}finally{y.value=!1,E.value.show()}},S=l=>{x.value=l,v.value=!0},N=async()=>{if(x.value)try{await $fetch(`/api/events/${x.value.id}`,{method:"DELETE"}),p.value="Deleted",m.value="Event deleted.",g.value="success",_()}catch{p.value="Error",m.value="Failed to delete event.",g.value="error"}finally{v.value=!1,x.value=null,E.value.show()}},T=l=>l?new Date(l)<new Date:!1,j=l=>l?new Date(l).toLocaleDateString("en-US",{month:"short"}):"--",B=l=>l?new Date(l).getDate():"--";return(l,t)=>{const R=A,q=H,z=O;return i(),r("div",le,[e("div",ne,[t[12]||(t[12]=e("div",null,[e("h1",{class:"text-3xl font-display font-bold text-white mb-2"},"Events"),e("p",{class:"text-slate-400"},"Manage company events and conferences.")],-1)),e("button",{onClick:t[0]||(t[0]=s=>$()),class:"px-4 py-2 bg-indigo-600 hover:bg-indigo-500 text-white rounded-lg text-sm font-medium shadow-lg shadow-indigo-500/20 transition-all"}," + New Event ")]),o(C)?(i(),r("div",ae,[...t[13]||(t[13]=[e("div",{class:"w-8 h-8 border-4 border-indigo-600 border-t-transparent rounded-full animate-spin mx-auto"},null,-1),e("p",{class:"text-slate-500 mt-4"},"Loading events...",-1)])])):o(k).length===0?(i(),r("div",ie,[u(o(Z),{class:"w-12 h-12 text-slate-500 mx-auto mb-4"}),t[14]||(t[14]=e("p",{class:"text-slate-400 mb-2"},"No events scheduled",-1)),e("button",{onClick:t[1]||(t[1]=s=>$()),class:"text-indigo-400 hover:text-indigo-300 text-sm font-medium"}," Create your first event ")])):(i(),r("div",re,[(i(!0),r(J,null,K(o(k),s=>(i(),r("div",{key:s.id,class:"p-6 rounded-2xl bg-slate-900/40 border border-white/5 hover:border-indigo-500/30 transition-all group relative"},[e("div",de,[e("button",{onClick:I=>$(s),class:"p-2 text-slate-400 hover:text-white hover:bg-white/10 rounded-lg transition-colors",title:"Edit"},[u(o(ee),{class:"w-4 h-4"})],8,ue),e("button",{onClick:I=>S(s),class:"p-2 text-slate-400 hover:text-rose-500 hover:bg-rose-500/10 rounded-lg transition-colors",title:"Delete"},[u(o(te),{class:"w-4 h-4"})],8,ce)]),e("div",{class:F(["w-14 h-14 rounded-xl flex flex-col items-center justify-center mb-4",T(s.eventDate)?"bg-slate-700":"bg-gradient-to-br from-indigo-600 to-purple-600"])},[e("span",pe,d(j(s.eventDate)),1),e("span",me,d(B(s.eventDate)),1)],2),e("h3",fe,d(s.title),1),s.location?(i(),r("div",ve,[u(o(se),{class:"w-4 h-4"}),e("span",xe,d(s.location),1)])):D("",!0),s.description?(i(),r("p",ge,d(s.description),1)):D("",!0),e("div",be,[e("span",{class:F(["px-3 py-1 text-xs font-medium rounded-full",T(s.eventDate)?"bg-slate-500/20 text-slate-400":"bg-emerald-500/20 text-emerald-400"])},d(T(s.eventDate)?"Past":"Upcoming"),3)])]))),128))])),o(U)>0?(i(),M(R,{key:3,"current-page":o(b),"onUpdate:currentPage":t[2]||(t[2]=s=>V(b)?b.value=s:null),total:o(U),"items-per-page":o(P)},null,8,["current-page","total","items-per-page"])):D("",!0),(i(),M(W,{to:"body"},[o(c)?(i(),r("div",he,[e("div",{class:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:t[3]||(t[3]=s=>c.value=!1)}),e("div",we,[e("div",ye,[e("h3",_e,d(o(f)?"Edit Event":"Create Event"),1),e("button",{onClick:t[4]||(t[4]=s=>c.value=!1),class:"text-slate-400 hover:text-white"},[u(o(oe),{class:"w-5 h-5"})])]),e("form",{class:"space-y-4",onSubmit:Q(L,["prevent"])},[e("div",De,[t[15]||(t[15]=e("label",{class:"text-sm font-medium text-slate-300"},"Event Title",-1)),h(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>o(n).title=s),required:"",type:"text",class:"w-full bg-slate-950 border border-white/10 rounded-xl px-4 py-2.5 text-white text-sm focus:outline-none focus:border-indigo-500/50 focus:ring-1 focus:ring-indigo-500/50 transition-all"},null,512),[[w,o(n).title]])]),e("div",ke,[e("div",Ce,[t[16]||(t[16]=e("label",{class:"text-sm font-medium text-slate-300"},"Event Date",-1)),h(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>o(n).eventDate=s),required:"",type:"date",class:"w-full bg-slate-950 border border-white/10 rounded-xl px-4 py-2.5 text-white text-sm focus:outline-none focus:border-indigo-500/50 focus:ring-1 focus:ring-indigo-500/50 transition-all"},null,512),[[w,o(n).eventDate]])]),e("div",Ee,[t[17]||(t[17]=e("label",{class:"text-sm font-medium text-slate-300"},"Location",-1)),h(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>o(n).location=s),type:"text",placeholder:"e.g. San Francisco, CA",class:"w-full bg-slate-950 border border-white/10 rounded-xl px-4 py-2.5 text-white text-sm focus:outline-none focus:border-indigo-500/50 focus:ring-1 focus:ring-indigo-500/50 transition-all"},null,512),[[w,o(n).location]])])]),e("div",Ue,[t[18]||(t[18]=e("label",{class:"text-sm font-medium text-slate-300"},"Image URL",-1)),h(e("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>o(n).imageUrl=s),type:"url",placeholder:"https://...",class:"w-full bg-slate-950 border border-white/10 rounded-xl px-4 py-2.5 text-white text-sm focus:outline-none focus:border-indigo-500/50 focus:ring-1 focus:ring-indigo-500/50 transition-all"},null,512),[[w,o(n).imageUrl]])]),e("div",$e,[t[19]||(t[19]=e("label",{class:"text-sm font-medium text-slate-300"},"Description",-1)),h(e("textarea",{"onUpdate:modelValue":t[9]||(t[9]=s=>o(n).description=s),rows:"3",placeholder:"Describe the event...",class:"w-full bg-slate-950 border border-white/10 rounded-xl px-4 py-2.5 text-white text-sm focus:outline-none focus:border-indigo-500/50 focus:ring-1 focus:ring-indigo-500/50 transition-all resize-none"},null,512),[[w,o(n).description]])]),e("div",Te,[e("button",{type:"button",onClick:t[10]||(t[10]=s=>c.value=!1),class:"flex-1 px-4 py-2.5 rounded-xl bg-white/5 hover:bg-white/10 text-white text-sm font-medium border border-white/5 transition-colors"}," Cancel "),e("button",{type:"submit",disabled:o(y),class:"flex-1 px-4 py-2.5 rounded-xl bg-indigo-600 hover:bg-indigo-500 text-white text-sm font-medium shadow-lg shadow-indigo-500/20 transition-all disabled:opacity-70"},d(o(y)?"Saving...":o(f)?"Save Changes":"Create Event"),9,Pe)])],32)])])):D("",!0)])),u(q,{modelValue:o(v),"onUpdate:modelValue":t[11]||(t[11]=s=>V(v)?v.value=s:null),title:"Delete Event",description:`Are you sure you want to delete '${o(x)?.title}'? This action cannot be undone.`,"confirm-text":"Delete",onConfirm:N},null,8,["modelValue","description"]),u(z,{ref_key:"toastRef",ref:E,title:o(p),message:o(m),type:o(g)},null,8,["title","message","type"])])}}},Ge=Y(Me,[["__scopeId","data-v-dea3b121"]]);export{Ge as default};
