import{_ as B}from"./BUSItsXT.js";import{_ as j}from"./B9a6rt6W.js";import{_ as z}from"./9kUDjqgu.js";import{M as P}from"./BrypkP-q.js";import{P as A}from"./BqpLgu8M.js";import{c as H}from"./ME1vAZHe.js";import{T as G}from"./CAblKD2E.js";import{r as l,C as J,H as U,c as r,a as t,l as K,k as D,b as m,F as q,m as V,n as s,t as i,y as I,o as n,x as E,d as T}from"./DSVZJnba.js";import"./CqshNR8s.js";import"./DlAUqK2U.js";import"./qQsMwbb5.js";import"./eTiOZxs9.js";const O=H("tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]),Q={class:"space-y-8"},W={class:"flex flex-col md:flex-row md:items-center justify-between gap-4"},X={class:"flex gap-2"},Y=["onClick"],Z={key:0,class:"text-center py-20"},ee={key:1,class:"text-center py-20 border border-dashed border-white/10 rounded-2xl"},te={class:"text-slate-400"},se={key:2,class:"space-y-4"},ae={class:"flex flex-col lg:flex-row lg:items-start gap-4"},oe={class:"flex-1 min-w-0"},le={class:"flex items-center gap-3 mb-2"},ne={class:"text-white font-medium text-lg"},re={class:"flex flex-wrap gap-4 text-sm text-slate-500 mb-4"},ie=["href"],ce={key:0,class:"flex items-center gap-1"},ue={key:1,class:"flex items-center gap-1"},de={class:"text-slate-300 text-sm whitespace-pre-wrap"},me={class:"text-slate-500 text-xs mt-4"},pe={class:"flex lg:flex-col items-center gap-2"},fe=["value","onChange"],ve=["onClick"],Ue={__name:"contacts",setup(he){const x=l([]),_=l(!0),c=l("all"),p=l(!1),f=l(null),y=l(null),v=l(""),h=l(""),g=l("success");J(()=>{w()});const u=l(1),b=l(0),$=l(10),w=async()=>{_.value=!0;try{const a=await $fetch("/api/contacts",{params:{page:u.value,limit:$.value,status:c.value}});x.value=a.data,b.value=a.meta.total}catch(a){console.error("Failed to fetch contacts:",a)}finally{_.value=!1}};U([u,c],()=>{c.value!=="all"&&u.value,w()}),U(c,()=>{u.value=1});const M=(a,o)=>{const d=a.target.value;N(o,d)},N=async(a,o)=>{try{await $fetch(`/api/contacts/${a}`,{method:"PUT",body:{status:o}});const d=x.value.find(k=>k.id===a);d&&(d.status=o),v.value="Updated",h.value="Status updated successfully.",g.value="success"}catch{v.value="Error",h.value="Failed to update status.",g.value="error"}y.value.show()},S=a=>{f.value=a,p.value=!0},F=async()=>{if(f.value)try{await $fetch(`/api/contacts/${f.value.id}`,{method:"DELETE"}),v.value="Deleted",h.value="Inquiry deleted.",g.value="success",w()}catch{v.value="Error",h.value="Failed to delete inquiry.",g.value="error"}finally{p.value=!1,f.value=null,y.value.show()}},L=a=>a?new Date(a).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Unknown";return(a,o)=>{const d=B,k=j,R=z;return n(),r("div",Q,[t("div",W,[o[2]||(o[2]=t("div",null,[t("h1",{class:"text-3xl font-display font-bold text-white mb-2"},"Contact Inquiries"),t("p",{class:"text-slate-400"},"View and manage messages from the public contact form.")],-1)),t("div",X,[(n(),r(q,null,V(["all","new","in-progress","resolved"],e=>t("button",{key:e,onClick:C=>c.value=e,class:E(["px-3 py-1.5 rounded-lg text-xs font-medium capitalize transition-all",s(c)===e?"bg-indigo-600 text-white":"bg-white/5 text-slate-400 hover:text-white"])},i(e==="in-progress"?"In Progress":e),11,Y)),64))])]),s(_)?(n(),r("div",Z,[...o[3]||(o[3]=[t("div",{class:"w-8 h-8 border-4 border-indigo-600 border-t-transparent rounded-full animate-spin mx-auto"},null,-1),t("p",{class:"text-slate-500 mt-4"},"Loading inquiries...",-1)])])):s(x).length===0?(n(),r("div",ee,[m(s(P),{class:"w-12 h-12 text-slate-500 mx-auto mb-4"}),t("p",te,"No "+i(s(c)==="all"?"":s(c))+" inquiries found",1)])):(n(),r("div",se,[(n(!0),r(q,null,V(s(x),e=>(n(),r("div",{key:e.id,class:"p-6 rounded-2xl bg-slate-900/40 border border-white/5 hover:border-indigo-500/30 transition-all"},[t("div",ae,[t("div",oe,[t("div",le,[t("h3",ne,i(e.name),1),t("span",{class:E(["px-2 py-0.5 text-[10px] font-medium uppercase tracking-wider rounded-full",{"bg-rose-500/20 text-rose-400":e.status==="new","bg-amber-500/20 text-amber-400":e.status==="in-progress","bg-emerald-500/20 text-emerald-400":e.status==="resolved"}])},i(e.status),3)]),t("div",re,[t("a",{href:`mailto:${e.email}`,class:"flex items-center gap-1 hover:text-indigo-400"},[m(s(P),{class:"w-4 h-4"}),T(" "+i(e.email),1)],8,ie),e.phone?(n(),r("span",ce,[m(s(A),{class:"w-4 h-4"}),T(" "+i(e.phone),1)])):D("",!0),e.subject?(n(),r("span",ue,[m(s(O),{class:"w-4 h-4"}),T(" "+i(e.subject),1)])):D("",!0)]),t("p",de,i(e.message),1),t("p",me," Received "+i(L(e.createdAt)),1)]),t("div",pe,[t("select",{value:e.status,onChange:C=>M(C,e.id),class:"bg-slate-950 border border-white/10 rounded-lg text-sm text-slate-300 px-3 py-2 outline-none focus:border-indigo-500 transition-colors"},[...o[4]||(o[4]=[t("option",{value:"new"},"New",-1),t("option",{value:"in-progress"},"In Progress",-1),t("option",{value:"resolved"},"Resolved",-1)])],40,fe),t("button",{onClick:C=>S(e),class:"p-2 text-slate-400 hover:text-rose-500 hover:bg-rose-500/10 rounded-lg transition-colors",title:"Delete"},[m(s(G),{class:"w-4 h-4"})],8,ve)])])]))),128))])),s(b)>0?(n(),K(d,{key:3,"current-page":s(u),"onUpdate:currentPage":o[0]||(o[0]=e=>I(u)?u.value=e:null),total:s(b),"items-per-page":s($)},null,8,["current-page","total","items-per-page"])):D("",!0),m(k,{modelValue:s(p),"onUpdate:modelValue":o[1]||(o[1]=e=>I(p)?p.value=e:null),title:"Delete Inquiry",description:`Are you sure you want to delete the inquiry from ${s(f)?.name}? This action cannot be undone.`,"confirm-text":"Delete",onConfirm:F},null,8,["modelValue","description"]),m(R,{ref_key:"toastRef",ref:y,title:s(v),message:s(h),type:s(g)},null,8,["title","message","type"])])}}};export{Ue as default};
